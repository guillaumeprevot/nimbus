<!DOCTYPE html>
<html lang="${lang}" data-theme="${theme}">
<head>
<title>${appName}</title>
<meta charset="UTF-8">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="robots" content="noindex, nofollow" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link type="image/x-icon" rel="shortcut icon" href="/favicon.ico" />
<link type="text/css" rel="stylesheet" href="/preferences/theme.css" />
<link type="text/css" rel="stylesheet" href="/libs/material-icons/material-icons.css" />
<link type="text/css" rel="stylesheet" href="/nimbus.css" />
<script type="text/javascript" src="/libs/jquery/jquery.min.js"></script>
<script type="text/javascript" src="/libs/popper/popper.min.js"></script>
<script type="text/javascript" src="/libs/bootstrap/bootstrap.min.js"></script>
<script type="text/javascript" src="/libs/gp/gp.js"></script>
<script type="text/javascript" src="/libs/gp/gp-autocomplete.js"></script>
<script type="text/javascript" src="/libs/gp/gp-backtotop.js"></script>
<script type="text/javascript" src="/libs/gp/gp-fileupload.js"></script>
<script type="text/javascript" src="/libs/gp/gp-tagsinput.js"></script>
<script type="text/javascript" src="/nimbus.js"></script>
<script type="text/javascript" src="/langs/${lang}.js"></script>
</head>
<body id="main" class="nimbus-hidden">

<nav class="navbar navbar-expand navbar-dark fixed-top bg-primary">
	<div class="nimbus-menu dropdown">
		<button id="menu-button" class="btn btn-link text-light dropdown-toggle" data-translate="title" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="MainToolbarTitle">
			<i class="material-icons">menu</i>
		</button>
		<div class="dropdown-menu" aria-labelledby="menu-button">
			<a class="dropdown-item" target="_blank" href="#">
				<i class="material-icons">home</i>
				<span data-translate="text">MainToolbarNewWindow</span>
			</a>
			<div class="dropdown-divider"></div>
			<a class="dropdown-item" href="#" data-toggle="modal" data-target="#add-folder-dialog">
				<i class="material-icons">create_new_folder</i>
				<span data-translate="text">MainToolbarAddFolder</span>
			</a>
			<a class="dropdown-item" href="#" onclick="$('#add-file-input').click();">
				<i class="material-icons">cloud_upload</i>
				<span data-translate="text">MainToolbarUploadFile</span>
			</a>
			<a class="dropdown-item" href="#" data-toggle="modal" data-target="#touch-file-dialog">
				<i class="material-icons">note_add</i>
				<span data-translate="text">MainToolbarTouchFile</span>
			</a>
			<a class="dropdown-item" href="#" data-toggle="modal" data-target="#add-url-dialog">
				<i class="material-icons">link</i>
				<span data-translate="text">MainToolbarDownloadURL</span>
			</a>
			<div class="dropdown-divider"></div>
			<a class="dropdown-item" href="/preferences.html">
				<i class="material-icons">account_box</i>
				<span data-translate="text">MainToolbarPreferences</span>
			</a>
			<#if admin>
			<a class="dropdown-item" href="/users.html">
				<i class="material-icons">supervisor_account</i>
				<span data-translate="text">MainToolbarUsers</span>
			</a>
			</#if>
			<a id="trash-menu-entry" class="dropdown-item" href="/trash.html">
				<i class="material-icons">delete_sweep</i>
				<span data-translate="text">MainToolbarTrash</span>
				<span></span>
			</a>
			<#if theme != "light">
			<button class="dropdown-item" type="button" data-theme="light">
				<i class="material-icons">invert_colors</i>
				<span data-translate="text">MainToolbarEnableLightTheme</span>
			</button>
			</#if>
			<#if theme != "dark">
			<button class="dropdown-item" type="button" data-theme="dark">
				<i class="material-icons">invert_colors</i>
				<span data-translate="text">MainToolbarEnableDarkTheme</span>
			</button>
			</#if>
			<div class="dropdown-divider"></div>
			<div class="text-muted px-3" data-translate="text">MainToolbarUsage</div>
			<div id="usage-menu-entry" class="progress mx-3 mt-1">
				<div class="progress-bar" role="progressbar" style="width: 40%" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
				<div class="progress-bar bg-secondary" role="progressbar" style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
			</div>
		</div>
	</div>
	<div class="collapse navbar-collapse">
		<ul id="path" class="navbar-nav mr-auto">
			<li class="nav-item active">
				<a class="nav-link" href="/nav">${appName}</a>
			</li>
		</ul>
		<div id="search-group" class="mx-2 form-inline">
			<input id="search-input" class="form-control" data-translate="placeholder" type="search" placeholder="MainSearchPlaceholder" />
			<button id="search-clear" class="btn btn-link text-light" data-translate="title" title="MainSearchClear">
				<i class="material-icons">clear</i>
			</button>
			<div class="btn-group">
				<button id="search-options" class="btn btn-link text-light dropdown-toggle" data-translate="title" data-toggle="dropdown" title="MainSearchOptions">
					<i class="material-icons">search</i>
				</button>
				<div class="dropdown-menu dropdown-menu-right" aria-labelledby="search-options">
					<a href="#" data-translate="text" class="dropdown-item active" id="search-option-recursive">MainSearchRecursive</a>
					<div class="dropdown-divider"></div>
					<a href="#" data-translate="text" class="dropdown-item" id="search-option-folders">MainSearchInFolders</a>
					<a href="#" data-translate="text" class="dropdown-item" id="search-option-files">MainSearchInFiles</a>
					<a href="#" data-translate="text" class="dropdown-item" data-extensions="appcache,css,csv,html,html,js,json,less,md,md5,sha1,sha256,sha512,ts,txt,xml">MainSearchInTextFiles</a>
					<a href="#" data-translate="text" class="dropdown-item" data-extensions="aac,m3u,mid,midi,mp3,oga,ogg,wav,weba,wma">MainSearchInAudio</a>
					<a href="#" data-translate="text" class="dropdown-item" data-extensions="3gp,avi,m4a,mkv,mov,mp4,mpeg,mpg,ogv,webm,wmv">MainSearchInVideo</a>
					<a href="#" data-translate="text" class="dropdown-item" data-extensions="bmp,gif,ico,jpeg,jpg,png,svg,webp">MainSearchInImage</a>
					<a href="#" data-translate="text" class="dropdown-item" data-extensions="abw,rtf,doc,xls,pps,ppt,docx,xlsx,pptx,ods,odt,odp,epub,azw,pdf,xps,chm">MainSearchInDocuments</a>
				</div>
			</div>
		</div>
		<a id="logout-button" class="mx-2 btn btn-link text-light" href="/logout" data-translate="title" title="MainToolbarLogout">
			<i class="material-icons">power_settings_new</i>
		</a>
		<button id="delete-button" class="mx-2 btn btn-light text-danger" data-translate="title" title="MainToolbarDelete">
			<i class="material-icons">delete</i>
			<span class="d-sm-none d-md-inline" data-translate="text">MainToolbarDelete</span>
		</button>
		<button id="download-button" class="mx-2 btn btn-light" data-translate="title" title="MainToolbarDownload">
			<i class="material-icons">cloud_download</i>
			<span class="d-sm-none d-md-inline" data-translate="text">MainToolbarDownload</span>
		</button>
		<button id="move-button" class="mx-2 btn btn-light" data-translate="title" title="MainToolbarMove">
			<i class="material-icons">subdirectory_arrow_right</i>
			<span class="d-sm-none d-md-inline" data-translate="text">MainToolbarMove</span>
		</button>
	</div>
</nav>

<input id="add-file-input" type="file" name="files" multiple="multiple" />

<div id="progress" class="m-2">
	<div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div></div>
	<span></span>
</div>

<div id="alert-container"></div>

<table id="items" class="table table-hover table-sm">
	<thead>
		<tr>
			<th class="icon">
				<input type="checkbox" id="all-selected-checkbox" />
			</th>
			<th class="name" data-sort="name">
				<span data-translate="text">MainTableName</span>
				<span id="itemcount" class="text-muted">0</span>
			</th>
			<th class="actions">
				<div class="dropdown">
					<button class="btn btn-link dropdown-toggle" type="button" id="items-options" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-translate="title" title="MainTableOptions"></button>
					<div class="dropdown-menu dropdown-menu-right" aria-labelledby="items-options" style="max-height: 300px; overflow-y: auto;">
						<h6 class="dropdown-header" data-translate="text">MainTableGridOptions</h6>
						<a href="#" data-translate="text" class="dropdown-item ${showHiddenItems?then("active","")}" id="show-hidden-items">MainTableGridOptionHidden</a>
						<a href="#" data-translate="text" class="dropdown-item ${showItemTags?then("active","")}" id="show-item-tags">MainTableGridOptionTags</a>
						<a href="#" data-translate="text" class="dropdown-item ${showItemDescription?then("active","")}" id="show-item-description">MainTableGridOptionDescription</a>
						<a href="#" data-translate="text" class="dropdown-item ${showItemThumbnail?then("active","")}" id="show-item-thumbnail">MainTableGridOptionThumbnail</a>
						<h6 class="dropdown-header" data-translate="text">MainTableGridProperties</h6>
					</div>
				</div>
			</th>
		</tr>
	</thead>
	<tbody>
	</tbody>
</table>

<div id="noitems" data-translate="text" class="alert alert-light m-2 nimbus-hidden" role="alert">MainTableEmpty</div>

<div id="add-folder-dialog" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" data-translate="text">MainAddFolderTitle</h5>
			</div>
			<div class="modal-body">
				<fieldset>
					<div class="form-group">
						<label for="add-folder-name" data-translate="text">MainAddFolderNameLabel</label>
						<input id="add-folder-name" class="form-control" data-translate="placeholder" autofocus="autofocus" name="name" type="text" maxlength="128" placeholder="MainAddFolderNamePlaceholder" />
						<div class="invalid-feedback" data-translate="text">MainAddFolderNameConflictErrorMessage</div>
					</div>
				</fieldset>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-translate="text" data-dismiss="modal">MainAddFolderCancelButton</button>
				<button type="button" class="btn btn-primary" data-translate="text" id="add-folder-validate-button">MainAddFolderValidateButton</button>
			</div>
		</div>
	</div>
</div>

<div id="touch-file-dialog" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" data-translate="text">MainTouchFileTitle</h5>
			</div>
			<div class="modal-body">
				<fieldset>
					<div class="form-group">
						<label for="touch-file-name" data-translate="text">MainTouchFileNameLabel</label>
						<input id="touch-file-name" class="form-control" data-translate="placeholder" autofocus="autofocus" name="name" type="text" maxlength="128" placeholder="MainTouchFileNamePlaceholder" />
						<div class="invalid-feedback" data-translate="text">MainTouchFileNameConflictErrorMessage</div>
					</div>
				</fieldset>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-translate="text" data-dismiss="modal">MainTouchFileCancelButton</button>
				<button type="button" class="btn btn-primary" data-translate="text" id="touch-file-validate-button">MainTouchFileValidateButton</button>
			</div>
		</div>
	</div>
</div>

<div id="add-url-dialog" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" data-translate="text">MainAddURLTitle</h5>
			</div>
			<div class="modal-body">
				<fieldset>
					<div class="form-group">
						<label for="add-url-name" data-translate="text">MainAddURLNameLabel</label>
						<input id="add-url-name" class="form-control" data-translate="placeholder" autofocus="autofocus" name="name" type="text" maxlength="128" placeholder="MainAddURLNamePlaceholder" />
						<div class="invalid-feedback" data-translate="text">MainAddURLNameConflictErrorMessage</div>
					</div>
					<div class="form-group">
						<label for="add-url-input" data-translate="text">MainAddURLInputLabel</label>
						<input id="add-url-input" class="form-control" data-translate="placeholder" name="input" type="text" maxlength="128" required="required" placeholder="MainAddURLInputPlaceholder" />
						<div class="invalid-feedback" data-translate="text">MainAddURLInsufficientStorage</div>
					</div>
				</fieldset>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-translate="text" data-dismiss="modal">MainAddURLCancelButton</button>
				<button type="button" class="btn btn-primary" data-translate="text" id="add-url-validate-button">MainAddURLValidateButton</button>
			</div>
		</div>
	</div>
</div>

<div id="rename-dialog" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" data-translate="text">MainRenameTitle</h5>
			</div>
			<div class="modal-body">
				<fieldset>
					<div class="form-group">
						<label for="rename-name" data-translate="text">MainRenameNameLabel</label>
						<input id="rename-name" class="form-control" data-translate="placeholder" autofocus="autofocus" name="name" type="text" placeholder="MainRenameNamePlaceholder" />
						<div class="invalid-feedback" data-translate="text">MainRenameNameConflictErrorMessage</div>
					</div>
					<div class="form-group">
						<label for="rename-icon-url" data-translate="text">MainRenameIconURLLabel</label>
						<input id="rename-icon-url" class="form-control" data-translate="placeholder" name="iconURL" type="text" placeholder="MainRenameIconURLPlaceholder" />
					</div>
					<div class="form-group">
						<label for="rename-tags" data-translate="text">MainRenameTagsLabel</label>
						<input id="rename-tags" class="form-control" data-translate="placeholder" name="tags" type="text" placeholder="MainRenameTagsPlaceholder" />
					</div>
				</fieldset>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-translate="text" data-dismiss="modal">MainRenameCancelButton</button>
				<button type="button" class="btn btn-primary" data-translate="text" id="rename-validate-button">MainRenameValidateButton</button>
			</div>
		</div>
	</div>
</div>

<div id="share-dialog" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title" data-translate="text">MainShareTitle</h4>
			</div>
			<div class="modal-body">
				<fieldset>
					<div class="form-group">
						<label for="share-duration" data-translate="text">MainShareDurationLabel</label>
						<select id="share-duration" class="form-control" autofocus="autofocus" name="duration">
							<option value="10" data-translate="text">MainShareDuration10Minutes</option>
							<option value="60" data-translate="text">MainShareDuration1Hour</option>
							<option value="120" data-translate="text">MainShareDuration2Hours</option>
							<option value="1440" data-translate="text">MainShareDuration1Day</option>
							<option value="10080" data-translate="text">MainShareDuration1Week</option>
							<option value="44640" data-translate="text">MainShareDuration1Month</option>
							<option value="" data-translate="text">MainShareDurationNoLimit</option>
						</select>
					</div>
					<div class="form-group">
						<label for="share-password" data-translate="text">MainSharePasswordLabel</label>
						<input id="share-password" class="form-control"  data-translate="placeholder" name="password" type="text" readonly="readonly" placeholder="MainSharePasswordPlaceholder" />
					</div>
					<div class="form-group">
						<label for="share-url" data-translate="text">MainShareURLLabel</label>
						<input id="share-url" class="form-control" data-translate="placeholder" name="url" type="text" readonly="readonly" placeholder="MainShareURLPlaceholder" />
					</div>
				</fieldset>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-link text-danger" data-translate="text" id="share-remove-button">MainShareRemoveButton</button>
				<button type="button" class="btn btn-secondary" data-translate="text" data-dismiss="modal">MainShareCancelButton</button>
				<button type="button" class="btn btn-primary" data-translate="text" id="share-validate-button">MainShareValidateButton</button>
			</div>
		</div>
	</div>
</div>

<div id="delete-dialog" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" data-translate="text">MainDeleteTitle</h5>
			</div>
			<div class="modal-body">
				<div data-translate="text">MainDeleteMessage</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-translate="text" autofocus="autofocus" data-dismiss="modal">MainDeleteCancelButton</button>
				<button type="button" class="btn btn-danger" data-translate="text" id="delete-validate-button">MainDeleteValidateButton</button>
			</div>
		</div>
	</div>
</div>

<div id="move-dialog" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" data-translate="text">MainMoveTitle</h5>
			</div>
			<div class="modal-body">
				<div class="form-group">
					<ul class="list-group list-group-flush">
						<li class="list-group-item list-group-item-action"><div data-translate="text">MainMoveRootFolder</div></li>
					</ul>
				</div>
				<div class="form-group">
					<label for="move-conflict-action" data-translate="text">MainMoveConflict</label>
					<select class="form-control" id="move-conflict">
						<option value="keepsource" data-translate="text">MainMoveConflictKeepSource</option>
						<option value="keeptarget" data-translate="text">MainMoveConflictKeepTarget</option>
						<option value="renamesource" data-translate="text">MainMoveConflictRenameSource</option>
						<option value="renametarget" data-translate="text">MainMoveConflictRenameTarget</option>
						<option value="keepnewest" data-translate="text">MainMoveConflictKeepNewest</option>
						<option value="skip" data-translate="text">MainMoveConflictSkip</option>
						<option value="abort" data-translate="text">MainMoveConflictAbort</option>
					</select>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-translate="text" autofocus="autofocus" data-dismiss="modal">MainMoveCancelButton</button>
				<button type="button" class="btn btn-primary" data-translate="text" id="move-validate-button">MainMoveValidateButton</button>
			</div>
		</div>
	</div>
</div>

<div id="actions-dialog" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-body">
				<div class="list-group"></div>
			</div>
		</div>
	</div>
</div>

<script>

//Initialiser la page
NIMBUS.init([<#list plugins as p>'${p}.js'<#sep>,</#sep></#list>], function() {
	// Chargement des propriétés disponibles
	var columns = [<#list visibleItemColumns as c>'${c}'<#sep>,</#sep></#list>];
	// Chargement des extensions des fichiers texte
	NIMBUS.utils.textFileExtensions = [<#list textFileExtensions as e>'${e}'<#sep>,</#sep></#list>];
	// L'IHM est prête, on l'affiche
	$(document.body).removeClass('nimbus-hidden');
	// Initialisation de la bavigation
	NIMBUS.navigation.init(columns, ${trashCount});
});
</script>
</body>
</html>